"use strict";angular.module("umbraco").controller("Koben.Iconic.Prevalues.Packages",["$scope","$http","assetsService",function(n,t){function r(){t.get("/App_Plugins/Iconic/preconfigs.json").success(function(t){n.preconfig=t.preconfigs}).error(function(){n.iconicError="iconic_errors_loading"})}function i(i,r,u){n.iconicError=null;(!i.selector||i.selector.length<=0)&&(u(),n.iconicError="iconic_errors_selector");i.sourcefile||(i.sourcefile=i.cssfile);t.get(i.sourcefile).success(function(t){i.extractedStyles=[];for(var e=new RegExp(i.selector,"g"),f=e.exec(t);f!==null;)i.extractedStyles.push(f[1]),f=e.exec(t);i.extractedStyles.length>0?r():(n.iconicError="iconic_errors_no_rules",u())}).error(function(){n.iconicError="iconic_errors_oading_css";u()})}n.newItem=new Package;n.data={editPackage:!1,analysing:"init",configType:"custom",selectedItem:null,selectedPreConfig:null,showNewItemForm:!1};angular.isArray(n.model.value)||(n.model.value=[]);n.addNewItem=function(t){t&&(n.data.analysing="busy",i(n.newItem,function(){n.model.value.push(angular.copy(n.newItem));n.newItem=new Package;n.data.showNewItemForm=!1;n.data.analysing="success";n.data.selectedPreConfig=null},function(){n.data.analysing="error"}))};n.submitEditPackage=function(t,r){r&&i(t,function(){n.data.analysing="success";n.data.editPackage=!1},function(){n.data.analysing="error"})};n.selectItem=function(t){n.data.selectedItem=n.data.selectedItem===t?null:t};n.removeItem=function(t){n.model.value.splice(t,1)};n.selectPreConfig=function(t){Object.assign(n.newItem,t)};r()}]);